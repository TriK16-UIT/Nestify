2025-01-05 16:41:48,788 - oauth2client.client - INFO - Refreshing access_token
2025-01-05 16:41:49,261 - logging_setup - INFO - Connected to MQTT server
2025-01-05 16:41:52,391 - logging_setup - INFO - Wait for scanning Bluetooth Devices
2025-01-05 16:42:04,852 - logging_setup - INFO - Found 3 devices.
2025-01-05 16:42:04,853 - logging_setup - INFO -   22:22:8D:D8:0F:5D - FPT Play Box +
2025-01-05 16:42:04,854 - logging_setup - INFO -   A0:A3:B3:EC:DD:36 - LIGHT1
2025-01-05 16:42:04,855 - logging_setup - INFO -   4C:11:AE:9E:C6:0E - FAN1
2025-01-05 16:42:14,027 - logging_setup - INFO - Connecting to LIGHT1.
2025-01-05 16:42:14,027 - logging_setup - INFO - Successfully connected! Sending Wi-Fi information...
2025-01-05 16:42:18,943 - logging_setup - INFO - Wi-Fi and MQTT setup completed successfully on device
2025-01-05 16:42:18,945 - logging_setup - INFO - Bluetooth connection closed.
2025-01-05 16:42:19,242 - logging_setup - INFO - Subscribed to topic: Hub1/LIGHT1
2025-01-05 16:42:19,291 - logging_setup - INFO - Published to Hub1/LIGHT1: {"status": "OFF", "dim": 10, "colour": "#FFFFFF"}
2025-01-05 16:42:38,157 - logging_setup - INFO - Connecting to FAN1.
2025-01-05 16:42:38,158 - logging_setup - INFO - Successfully connected! Sending Wi-Fi information...
2025-01-05 16:42:42,495 - logging_setup - INFO - Wi-Fi and MQTT setup completed successfully on device
2025-01-05 16:42:42,496 - logging_setup - INFO - Bluetooth connection closed.
2025-01-05 16:42:42,627 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-19' coro=<handle_connecting() done, defined at /home/tri/Desktop/Home Automation/Threading Hub/hub.py:19> exception=AttributeError("'tuple' object has no attribute 'startswith'")>
Traceback (most recent call last):
  File "/home/tri/Desktop/Home Automation/Threading Hub/hub.py", line 29, in handle_connecting
    await device_manager.add_device_handler(chosen_device_info['name'], device_type)
  File "/home/tri/Desktop/Home Automation/Threading Hub/device_manager.py", line 46, in add_device_handler
    device_count = sum(1 for device in self.list_of_devices if device.startswith(base_name))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/tri/Desktop/Home Automation/Threading Hub/device_manager.py", line 46, in <genexpr>
    device_count = sum(1 for device in self.list_of_devices if device.startswith(base_name))
                                                               ^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'startswith'
2025-01-05 16:43:09,255 - logging_setup - INFO - Published to Hub1/LIGHT1: {"status": "disconnect"}
