2025-01-05 16:31:29,131 - oauth2client.client - INFO - Refreshing access_token
2025-01-05 16:31:29,637 - logging_setup - INFO - Connected to MQTT server
2025-01-05 16:31:36,908 - logging_setup - INFO - Wait for scanning Bluetooth Devices
2025-01-05 16:31:49,862 - logging_setup - INFO - Found 1 devices.
2025-01-05 16:31:49,863 - logging_setup - INFO -   22:22:8D:D8:0F:5D - FPT Play Box +
2025-01-05 16:32:15,386 - logging_setup - INFO - Wait for scanning Bluetooth Devices
2025-01-05 16:32:27,162 - logging_setup - INFO - Found 2 devices.
2025-01-05 16:32:27,162 - logging_setup - INFO -   22:22:8D:D8:0F:5D - FPT Play Box +
2025-01-05 16:32:27,163 - logging_setup - INFO -   A0:A3:B3:EC:DD:36 - LIGHT1
2025-01-05 16:32:34,604 - logging_setup - INFO - Connecting to LIGHT1.
2025-01-05 16:32:34,605 - logging_setup - INFO - Successfully connected! Sending Wi-Fi information...
2025-01-05 16:32:35,693 - logging_setup - INFO - Recognized speech: so so
2025-01-05 16:32:40,787 - logging_setup - INFO - Wi-Fi and MQTT setup completed successfully on device
2025-01-05 16:32:40,788 - logging_setup - INFO - Bluetooth connection closed.
2025-01-05 16:32:41,431 - logging_setup - INFO - Subscribed to topic: -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:32:41,499 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"status": "OFF", "dim": 10, "colour": "#FFFFFF"}
2025-01-05 16:32:55,826 - logging_setup - INFO - Recognized speech: play
2025-01-05 16:32:58,939 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"status": "ON"}
2025-01-05 16:32:58,940 - logging_setup - INFO - Published current status: ON for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:33:08,953 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"status": "OFF"}
2025-01-05 16:33:08,956 - logging_setup - INFO - Published current status: OFF for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:33:18,975 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"status": "ON"}
2025-01-05 16:33:18,977 - logging_setup - INFO - Published current status: ON for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:33:29,610 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"dim": 48}
2025-01-05 16:33:29,612 - logging_setup - INFO - Published current dim: 48 for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:33:39,630 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"dim": 95}
2025-01-05 16:33:39,632 - logging_setup - INFO - Published current dim: 95 for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:33:49,651 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"dim": 0}
2025-01-05 16:33:49,652 - logging_setup - INFO - Published current dim: 0 for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:33:51,196 - logging_setup - INFO - Recognized speech: play my
2025-01-05 16:34:07,986 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"dim": 34}
2025-01-05 16:34:07,987 - logging_setup - INFO - Published current dim: 34 for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:34:16,284 - logging_setup - INFO - Recognized speech: yay
2025-01-05 16:34:18,000 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"colour": "#f90000"}
2025-01-05 16:34:18,001 - logging_setup - INFO - Published current colour: #f90000 for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:34:21,623 - logging_setup - INFO - Recognized speech: hey harvey
2025-01-05 16:34:21,623 - logging_setup - INFO - Wake word 'Hey Harvey' detected
2025-01-05 16:34:24,575 - logging_setup - INFO - Listening for a command...
2025-01-05 16:34:28,162 - logging_setup - INFO - Recognized command: turn off light one
2025-01-05 16:34:30,434 - logging_setup - INFO - Gemni response: {
  "action": "off",
  "device": "light 1",
  "room": null
}
2025-01-05 16:34:30,435 - logging_setup - INFO - Controlling device LIGHT 1 with data {'status': 'OFF'} from given name
2025-01-05 16:34:30,739 - logging_setup - INFO - Device LIGHT 1 updated successfully with data: {'status': 'OFF'}
2025-01-05 16:34:40,751 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"status": "OFF"}
2025-01-05 16:34:40,752 - logging_setup - INFO - Published current {'status': 'OFF'} for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:34:46,241 - logging_setup - INFO - Recognized speech: hey harvey
2025-01-05 16:34:46,242 - logging_setup - INFO - Wake word 'Hey Harvey' detected
2025-01-05 16:34:49,199 - logging_setup - INFO - Listening for a command...
2025-01-05 16:34:52,828 - logging_setup - INFO - Recognized command: turn on light one
2025-01-05 16:34:53,603 - logging_setup - INFO - Gemni response: {
  "action": "on",
  "device": "light 1",
  "room": null
}
2025-01-05 16:34:53,604 - logging_setup - INFO - Controlling device LIGHT 1 with data {'status': 'ON'} from given name
2025-01-05 16:34:53,924 - logging_setup - INFO - Device LIGHT 1 updated successfully with data: {'status': 'ON'}
2025-01-05 16:35:03,938 - logging_setup - INFO - Published to -O0qUnBd90cvCv0JULl0/LIGHT1: {"status": "ON"}
2025-01-05 16:35:03,939 - logging_setup - INFO - Published current {'status': 'ON'} for LIGHT1 to MQTT topic -O0qUnBd90cvCv0JULl0/LIGHT1
2025-01-05 16:35:50,078 - logging_setup - INFO - Wait for scanning Bluetooth Devices
2025-01-05 16:36:00,648 - logging_setup - INFO - Found 1 devices.
2025-01-05 16:36:00,648 - logging_setup - INFO -   4C:11:AE:9E:C6:0E - FAN1
2025-01-05 16:36:01,831 - logging_setup - INFO - Recognized speech: leave
2025-01-05 16:36:17,603 - logging_setup - INFO - Wait for scanning Bluetooth Devices
2025-01-05 16:36:31,025 - logging_setup - INFO - Found 2 devices.
2025-01-05 16:36:31,025 - logging_setup - INFO -   22:22:8D:D8:0F:5D - FPT Play Box +
2025-01-05 16:36:31,026 - logging_setup - INFO -   4C:11:AE:9E:C6:0E - FAN1
2025-01-05 16:36:42,396 - logging_setup - INFO - Connecting to FAN1.
2025-01-05 16:36:42,397 - logging_setup - INFO - Successfully connected! Sending Wi-Fi information...
2025-01-05 16:36:46,243 - logging_setup - INFO - Wi-Fi and MQTT setup completed successfully on device
2025-01-05 16:36:46,243 - logging_setup - INFO - Bluetooth connection closed.
2025-01-05 16:36:46,626 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-89' coro=<handle_connecting() done, defined at /home/tri/Desktop/Home Automation/Threading Hub/hub.py:19> exception=AttributeError("'tuple' object has no attribute 'startswith'")>
Traceback (most recent call last):
  File "/home/tri/Desktop/Home Automation/Threading Hub/hub.py", line 29, in handle_connecting
    await device_manager.add_device_handler(chosen_device_info['name'], device_type)
  File "/home/tri/Desktop/Home Automation/Threading Hub/device_manager.py", line 46, in add_device_handler
    device_count = sum(1 for device in self.list_of_devices if device.startswith(base_name))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/tri/Desktop/Home Automation/Threading Hub/device_manager.py", line 46, in <genexpr>
    device_count = sum(1 for device in self.list_of_devices if device.startswith(base_name))
                                                               ^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'startswith'
